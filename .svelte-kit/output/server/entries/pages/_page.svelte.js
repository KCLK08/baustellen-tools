import { c as create_ssr_component, d as add_attribute, f as each, e as escape } from "../../chunks/ssr.js";
import Dexie from "dexie";
import "browser-image-compression";
import "exceljs";
import "@capacitor/core";
import "@capacitor/filesystem";
import "@capacitor/share";
const db = new Dexie("protokoll_app");
db.version(1).stores({
  settings: "&id",
  entries: "id, createdAt"
});
const css = {
  code: ".page.svelte-9xbezc.svelte-9xbezc{max-width:980px;margin:0 auto;padding:32px 20px 80px}.hero.svelte-9xbezc.svelte-9xbezc{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:28px}.eyebrow.svelte-9xbezc.svelte-9xbezc{text-transform:uppercase;font-size:12px;letter-spacing:0.14em;color:var(--muted);margin:0 0 6px}h1.svelte-9xbezc.svelte-9xbezc{margin:0 0 8px;font-size:38px}.sub.svelte-9xbezc.svelte-9xbezc{margin:0;color:var(--muted)}.badge.svelte-9xbezc.svelte-9xbezc{background:var(--accent-2);color:white;padding:10px 14px;border-radius:999px;font-weight:600}.panel.svelte-9xbezc.svelte-9xbezc{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:20px;box-shadow:0 12px 30px rgba(23, 21, 18, 0.08)}.field.svelte-9xbezc.svelte-9xbezc{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}input.svelte-9xbezc.svelte-9xbezc,select.svelte-9xbezc.svelte-9xbezc{padding:10px 12px;border:1px solid var(--border);border-radius:10px;font-size:14px}button.svelte-9xbezc.svelte-9xbezc{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:white;cursor:pointer;font-weight:600}button.primary.svelte-9xbezc.svelte-9xbezc{background:var(--accent);color:white;border-color:var(--accent)}button.active.svelte-9xbezc.svelte-9xbezc{background:var(--accent-2);color:white;border-color:var(--accent-2)}button.svelte-9xbezc.svelte-9xbezc:disabled{opacity:0.6;cursor:not-allowed}.columns.svelte-9xbezc.svelte-9xbezc{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;margin:12px 0 16px}.col-card.svelte-9xbezc.svelte-9xbezc{padding:12px;border:1px dashed var(--border);border-radius:12px;background:#ffffff;display:flex;flex-direction:column;gap:8px}.col-title.svelte-9xbezc.svelte-9xbezc{font-weight:700}.col-meta.svelte-9xbezc.svelte-9xbezc{color:var(--muted);font-size:13px}.add-row.svelte-9xbezc.svelte-9xbezc{display:grid;grid-template-columns:1fr 150px 200px;gap:10px}.save-row.svelte-9xbezc.svelte-9xbezc{display:flex;align-items:center;gap:10px;margin-top:12px}.saved.svelte-9xbezc.svelte-9xbezc{color:var(--accent-2);font-weight:600}.grid.svelte-9xbezc.svelte-9xbezc{display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:12px}.preview.svelte-9xbezc.svelte-9xbezc{width:100%;max-width:320px;border-radius:12px;border:1px solid var(--border);margin-bottom:14px}.entries.svelte-9xbezc.svelte-9xbezc{display:grid;gap:12px}.entry-card.svelte-9xbezc.svelte-9xbezc{display:grid;grid-template-columns:160px 1fr;gap:12px;padding:12px;border:1px solid var(--border);border-radius:12px;background:#fff}.entry-card.svelte-9xbezc img.svelte-9xbezc{width:100%;border-radius:10px;object-fit:cover}.entry-date.svelte-9xbezc.svelte-9xbezc{font-size:12px;color:var(--muted);margin-bottom:6px}.entry-fields.svelte-9xbezc.svelte-9xbezc{display:grid;gap:4px}.export-row.svelte-9xbezc.svelte-9xbezc{display:flex;gap:12px;flex-wrap:wrap}.muted.svelte-9xbezc.svelte-9xbezc{color:var(--muted)}@media(max-width: 720px){.hero.svelte-9xbezc.svelte-9xbezc{flex-direction:column;align-items:flex-start}.add-row.svelte-9xbezc.svelte-9xbezc{grid-template-columns:1fr}.entry-card.svelte-9xbezc.svelte-9xbezc{grid-template-columns:1fr}}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script>\\n  import { onMount } from 'svelte';\\n  import { addEntry, listEntries, loadSettings, saveSettings } from '$lib/db';\\n  import { compressImage, blobToObjectUrl } from '$lib/image';\\n  import { exportToXlsx, exportToXlsxShare } from '$lib/export';\\n  import { isNativePlatform, shareXlsx } from '$lib/native';\\n\\n  let projectName = 'Baustellen-Protokoll';\\n  let columns = [\\n    { name: 'Bilder', type: 'text', isPhoto: true },\\n    { name: 'Kilometer', type: 'number', isPhoto: false },\\n    { name: 'Beschreibung', type: 'text', isPhoto: false },\\n    { name: 'Status', type: 'text', isPhoto: false }\\n  ];\\n\\n  let newColName = '';\\n  let newColType = 'text';\\n\\n  let entries = [];\\n  let entry = {\\n    fields: {},\\n    photoFile: null,\\n    photoPreview: ''\\n  };\\n\\n  let isSaving = false;\\n  let isExporting = false;\\n  let isSharing = false;\\n  let settingsSaved = false;\\n\\n  let nativeAvailable = false;\\n\\n  onMount(async () => {\\n    nativeAvailable = isNativePlatform();\\n\\n    const saved = await loadSettings();\\n    if (saved) {\\n      projectName = saved.projectName ?? projectName;\\n      columns = saved.columns ?? columns;\\n    }\\n\\n    const storedEntries = await listEntries();\\n    entries = storedEntries.map((e) => ({\\n      ...e,\\n      photoPreview: e.photoBlob ? blobToObjectUrl(e.photoBlob) : ''\\n    }));\\n  });\\n\\n  const addColumn = () => {\\n    if (!newColName.trim()) return;\\n    columns = [...columns, { name: newColName.trim(), type: newColType, isPhoto: false }];\\n    newColName = '';\\n    newColType = 'text';\\n  };\\n\\n  const setPhotoColumn = (name) => {\\n    columns = columns.map((c) => ({ ...c, isPhoto: c.name === name }));\\n  };\\n\\n  const persistSettings = async () => {\\n    await saveSettings({ projectName, columns });\\n    settingsSaved = true;\\n    setTimeout(() => {\\n      settingsSaved = false;\\n    }, 1600);\\n  };\\n\\n  const handlePhoto = async (e) => {\\n    const file = e.currentTarget.files?.[0];\\n    if (!file) return;\\n    const compressed = await compressImage(file);\\n    entry.photoFile = compressed;\\n    entry.photoPreview = blobToObjectUrl(compressed);\\n  };\\n\\n  const saveEntry = async () => {\\n    if (isSaving) return;\\n    isSaving = true;\\n\\n    const snapshot = {\\n      id: crypto.randomUUID(),\\n      createdAt: new Date().toISOString(),\\n      fields: { ...entry.fields },\\n      photoBlob: entry.photoFile ?? null\\n    };\\n\\n    await addEntry(snapshot);\\n\\n    entries = [\\n      {\\n        ...snapshot,\\n        photoPreview: snapshot.photoBlob ? blobToObjectUrl(snapshot.photoBlob) : ''\\n      },\\n      ...entries\\n    ];\\n\\n    entry = { fields: {}, photoFile: null, photoPreview: '' };\\n    isSaving = false;\\n  };\\n\\n  const runExport = async () => {\\n    if (isExporting) return;\\n    isExporting = true;\\n    await exportToXlsx({ projectName, columns, entries });\\n    isExporting = false;\\n  };\\n\\n  const runShare = async () => {\\n    if (isSharing) return;\\n    isSharing = true;\\n    await exportToXlsxShare({ projectName, columns, entries, shareFn: shareXlsx });\\n    isSharing = false;\\n  };\\n<\/script>\\n\\n<div class=\\"page\\">\\n  <header class=\\"hero\\">\\n    <div>\\n      <p class=\\"eyebrow\\">Offline Baustellen-Tool</p>\\n      <h1>Protokoll App</h1>\\n      <p class=\\"sub\\">Definiere Spalten, dokumentiere Fotos, exportiere als XLSX.</p>\\n    </div>\\n    <div class=\\"badge\\">MVP Preview</div>\\n  </header>\\n\\n  <section class=\\"panel\\">\\n    <h2>1. Tabellenformat</h2>\\n    <label class=\\"field\\">\\n      <span>Projektname</span>\\n      <input bind:value={projectName} placeholder=\\"Projektname\\" />\\n    </label>\\n\\n    <div class=\\"columns\\">\\n      {#each columns as col}\\n        <div class=\\"col-card\\">\\n          <div class=\\"col-title\\">{col.name}</div>\\n          <div class=\\"col-meta\\">Typ: {col.type}</div>\\n          <button type=\\"button\\" class:active={col.isPhoto} on:click={() => setPhotoColumn(col.name)}>\\n            {col.isPhoto ? 'Foto-Spalte' : 'Als Foto-Spalte wählen'}\\n          </button>\\n        </div>\\n      {/each}\\n    </div>\\n\\n    <div class=\\"add-row\\">\\n      <input bind:value={newColName} placeholder=\\"Spaltenname\\" />\\n      <select bind:value={newColType}>\\n        <option value=\\"text\\">Text</option>\\n        <option value=\\"number\\">Zahl</option>\\n      </select>\\n      <button type=\\"button\\" on:click={addColumn}>Spalte hinzufügen</button>\\n    </div>\\n\\n    <div class=\\"save-row\\">\\n      <button class=\\"primary\\" type=\\"button\\" on:click={persistSettings}>Format speichern</button>\\n      {#if settingsSaved}\\n        <span class=\\"saved\\">Gespeichert</span>\\n      {/if}\\n    </div>\\n  </section>\\n\\n  <section class=\\"panel\\">\\n    <h2>2. Neuer Eintrag</h2>\\n\\n    <label class=\\"field\\">\\n      <span>Foto</span>\\n      <input type=\\"file\\" accept=\\"image/*\\" capture=\\"environment\\" on:change={handlePhoto} />\\n    </label>\\n\\n    {#if entry.photoPreview}\\n      <img class=\\"preview\\" src={entry.photoPreview} alt=\\"Vorschau\\" />\\n    {/if}\\n\\n    <div class=\\"grid\\">\\n      {#each columns.filter((c) => !c.isPhoto) as col}\\n        <label class=\\"field\\">\\n          <span>{col.name}</span>\\n          {#if col.type === 'number'}\\n            <input type=\\"number\\" placeholder={col.name} bind:value={entry.fields[col.name]} />\\n          {:else}\\n            <input type=\\"text\\" placeholder={col.name} bind:value={entry.fields[col.name]} />\\n          {/if}\\n        </label>\\n      {/each}\\n    </div>\\n\\n    <button class=\\"primary\\" type=\\"button\\" disabled={isSaving} on:click={saveEntry}>\\n      {isSaving ? 'Speichern…' : 'Eintrag speichern'}\\n    </button>\\n  </section>\\n\\n  <section class=\\"panel\\">\\n    <h2>3. Einträge</h2>\\n    {#if entries.length === 0}\\n      <p class=\\"muted\\">Noch keine Einträge.</p>\\n    {:else}\\n      <div class=\\"entries\\">\\n        {#each entries as e}\\n          <div class=\\"entry-card\\">\\n            {#if e.photoPreview}\\n              <img src={e.photoPreview} alt=\\"Foto\\" />\\n            {/if}\\n            <div class=\\"entry-body\\">\\n              <div class=\\"entry-date\\">{new Date(e.createdAt).toLocaleString()}</div>\\n              <div class=\\"entry-fields\\">\\n                {#each Object.entries(e.fields) as [key, value]}\\n                  <div><strong>{key}:</strong> {value}</div>\\n                {/each}\\n              </div>\\n            </div>\\n          </div>\\n        {/each}\\n      </div>\\n    {/if}\\n  </section>\\n\\n  <section class=\\"panel\\">\\n    <h2>4. Export</h2>\\n    <div class=\\"export-row\\">\\n      <button type=\\"button\\" class=\\"primary\\" disabled={isExporting} on:click={runExport}>\\n        {isExporting ? 'Exportiere…' : 'XLSX lokal speichern'}\\n      </button>\\n      <button type=\\"button\\" disabled={!nativeAvailable || isSharing} on:click={runShare}>\\n        {isSharing ? 'Teile…' : 'Per E-Mail teilen'}\\n      </button>\\n    </div>\\n    {#if !nativeAvailable}\\n      <p class=\\"muted\\">E-Mail-Teilen ist in der PWA deaktiviert. Verfügbar in der nativen App.</p>\\n    {/if}\\n  </section>\\n</div>\\n\\n<style>\\n  .page {\\n    max-width: 980px;\\n    margin: 0 auto;\\n    padding: 32px 20px 80px;\\n  }\\n\\n  .hero {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    gap: 16px;\\n    margin-bottom: 28px;\\n  }\\n\\n  .eyebrow {\\n    text-transform: uppercase;\\n    font-size: 12px;\\n    letter-spacing: 0.14em;\\n    color: var(--muted);\\n    margin: 0 0 6px;\\n  }\\n\\n  h1 {\\n    margin: 0 0 8px;\\n    font-size: 38px;\\n  }\\n\\n  .sub {\\n    margin: 0;\\n    color: var(--muted);\\n  }\\n\\n  .badge {\\n    background: var(--accent-2);\\n    color: white;\\n    padding: 10px 14px;\\n    border-radius: 999px;\\n    font-weight: 600;\\n  }\\n\\n  .panel {\\n    background: var(--panel);\\n    border: 1px solid var(--border);\\n    border-radius: var(--radius);\\n    padding: 20px;\\n    margin-bottom: 20px;\\n    box-shadow: 0 12px 30px rgba(23, 21, 18, 0.08);\\n  }\\n\\n  .field {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 6px;\\n    margin-bottom: 12px;\\n  }\\n\\n  input, select {\\n    padding: 10px 12px;\\n    border: 1px solid var(--border);\\n    border-radius: 10px;\\n    font-size: 14px;\\n  }\\n\\n  button {\\n    padding: 10px 14px;\\n    border: 1px solid var(--border);\\n    border-radius: 10px;\\n    background: white;\\n    cursor: pointer;\\n    font-weight: 600;\\n  }\\n\\n  button.primary {\\n    background: var(--accent);\\n    color: white;\\n    border-color: var(--accent);\\n  }\\n\\n  button.active {\\n    background: var(--accent-2);\\n    color: white;\\n    border-color: var(--accent-2);\\n  }\\n\\n  button:disabled {\\n    opacity: 0.6;\\n    cursor: not-allowed;\\n  }\\n\\n  .columns {\\n    display: grid;\\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\\n    gap: 12px;\\n    margin: 12px 0 16px;\\n  }\\n\\n  .col-card {\\n    padding: 12px;\\n    border: 1px dashed var(--border);\\n    border-radius: 12px;\\n    background: #ffffff;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 8px;\\n  }\\n\\n  .col-title {\\n    font-weight: 700;\\n  }\\n\\n  .col-meta {\\n    color: var(--muted);\\n    font-size: 13px;\\n  }\\n\\n  .add-row {\\n    display: grid;\\n    grid-template-columns: 1fr 150px 200px;\\n    gap: 10px;\\n  }\\n\\n  .save-row {\\n    display: flex;\\n    align-items: center;\\n    gap: 10px;\\n    margin-top: 12px;\\n  }\\n\\n  .saved {\\n    color: var(--accent-2);\\n    font-weight: 600;\\n  }\\n\\n  .grid {\\n    display: grid;\\n    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\\n    gap: 12px;\\n  }\\n\\n  .preview {\\n    width: 100%;\\n    max-width: 320px;\\n    border-radius: 12px;\\n    border: 1px solid var(--border);\\n    margin-bottom: 14px;\\n  }\\n\\n  .entries {\\n    display: grid;\\n    gap: 12px;\\n  }\\n\\n  .entry-card {\\n    display: grid;\\n    grid-template-columns: 160px 1fr;\\n    gap: 12px;\\n    padding: 12px;\\n    border: 1px solid var(--border);\\n    border-radius: 12px;\\n    background: #fff;\\n  }\\n\\n  .entry-card img {\\n    width: 100%;\\n    border-radius: 10px;\\n    object-fit: cover;\\n  }\\n\\n  .entry-date {\\n    font-size: 12px;\\n    color: var(--muted);\\n    margin-bottom: 6px;\\n  }\\n\\n  .entry-fields {\\n    display: grid;\\n    gap: 4px;\\n  }\\n\\n  .export-row {\\n    display: flex;\\n    gap: 12px;\\n    flex-wrap: wrap;\\n  }\\n\\n  .muted {\\n    color: var(--muted);\\n  }\\n\\n  @media (max-width: 720px) {\\n    .hero {\\n      flex-direction: column;\\n      align-items: flex-start;\\n    }\\n    .add-row {\\n      grid-template-columns: 1fr;\\n    }\\n    .entry-card {\\n      grid-template-columns: 1fr;\\n    }\\n  }\\n</style>\\n"],"names":[],"mappings":"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"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let projectName = "Baustellen-Protokoll";
  let columns = [
    {
      name: "Bilder",
      type: "text",
      isPhoto: true
    },
    {
      name: "Kilometer",
      type: "number",
      isPhoto: false
    },
    {
      name: "Beschreibung",
      type: "text",
      isPhoto: false
    },
    {
      name: "Status",
      type: "text",
      isPhoto: false
    }
  ];
  let newColName = "";
  let entries = [];
  let entry = {
    fields: {}
  };
  $$result.css.add(css);
  return `<div class="page svelte-9xbezc"><header class="hero svelte-9xbezc" data-svelte-h="svelte-1mkynb5"><div><p class="eyebrow svelte-9xbezc">Offline Baustellen-Tool</p> <h1 class="svelte-9xbezc">Protokoll App</h1> <p class="sub svelte-9xbezc">Definiere Spalten, dokumentiere Fotos, exportiere als XLSX.</p></div> <div class="badge svelte-9xbezc">MVP Preview</div></header> <section class="panel svelte-9xbezc"><h2 data-svelte-h="svelte-gtnm4f">1. Tabellenformat</h2> <label class="field svelte-9xbezc"><span data-svelte-h="svelte-16106w">Projektname</span> <input placeholder="Projektname" class="svelte-9xbezc"${add_attribute("value", projectName, 0)}></label> <div class="columns svelte-9xbezc">${each(columns, (col) => {
    return `<div class="col-card svelte-9xbezc"><div class="col-title svelte-9xbezc">${escape(col.name)}</div> <div class="col-meta svelte-9xbezc">Typ: ${escape(col.type)}</div> <button type="button" class="${["svelte-9xbezc", col.isPhoto ? "active" : ""].join(" ").trim()}">${escape(col.isPhoto ? "Foto-Spalte" : "Als Foto-Spalte wählen")}</button> </div>`;
  })}</div> <div class="add-row svelte-9xbezc"><input placeholder="Spaltenname" class="svelte-9xbezc"${add_attribute("value", newColName, 0)}> <select class="svelte-9xbezc"><option value="text" data-svelte-h="svelte-1mqqvia">Text</option><option value="number" data-svelte-h="svelte-pxyld2">Zahl</option></select> <button type="button" class="svelte-9xbezc" data-svelte-h="svelte-1b15m1p">Spalte hinzufügen</button></div> <div class="save-row svelte-9xbezc"><button class="primary svelte-9xbezc" type="button" data-svelte-h="svelte-1mp21br">Format speichern</button> ${``}</div></section> <section class="panel svelte-9xbezc"><h2 data-svelte-h="svelte-pp8t2f">2. Neuer Eintrag</h2> <label class="field svelte-9xbezc"><span data-svelte-h="svelte-9bxecg">Foto</span> <input type="file" accept="image/*" capture="environment" class="svelte-9xbezc"></label> ${``} <div class="grid svelte-9xbezc">${each(columns.filter((c) => !c.isPhoto), (col) => {
    return `<label class="field svelte-9xbezc"><span>${escape(col.name)}</span> ${col.type === "number" ? `<input type="number"${add_attribute("placeholder", col.name, 0)} class="svelte-9xbezc"${add_attribute("value", entry.fields[col.name], 0)}>` : `<input type="text"${add_attribute("placeholder", col.name, 0)} class="svelte-9xbezc"${add_attribute("value", entry.fields[col.name], 0)}>`} </label>`;
  })}</div> <button class="primary svelte-9xbezc" type="button" ${""}>${escape("Eintrag speichern")}</button></section> <section class="panel svelte-9xbezc"><h2 data-svelte-h="svelte-19tgb99">3. Einträge</h2> ${entries.length === 0 ? `<p class="muted svelte-9xbezc" data-svelte-h="svelte-b9wcni">Noch keine Einträge.</p>` : `<div class="entries svelte-9xbezc">${each(entries, (e) => {
    return `<div class="entry-card svelte-9xbezc">${e.photoPreview ? `<img${add_attribute("src", e.photoPreview, 0)} alt="Foto" class="svelte-9xbezc">` : ``} <div class="entry-body"><div class="entry-date svelte-9xbezc">${escape(new Date(e.createdAt).toLocaleString())}</div> <div class="entry-fields svelte-9xbezc">${each(Object.entries(e.fields), ([key, value]) => {
      return `<div><strong>${escape(key)}:</strong> ${escape(value)}</div>`;
    })} </div></div> </div>`;
  })}</div>`}</section> <section class="panel svelte-9xbezc"><h2 data-svelte-h="svelte-17g2zmu">4. Export</h2> <div class="export-row svelte-9xbezc"><button type="button" class="primary svelte-9xbezc" ${""}>${escape("XLSX lokal speichern")}</button> <button type="button" ${"disabled"} class="svelte-9xbezc">${escape("Per E-Mail teilen")}</button></div> ${`<p class="muted svelte-9xbezc" data-svelte-h="svelte-4a933y">E-Mail-Teilen ist in der PWA deaktiviert. Verfügbar in der nativen App.</p>`}</section> </div>`;
});
export {
  Page as default
};
